package tester;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Random;

public class Test4_CompareFiles {

    public static void main(String[] args) throws Exception {
        String filePath1 = "Cloud\\client1\\10mb.zip";
        String filePath2 = "Cloud\\client2\\10mb.zip";
        String filePath3 = "C:\\Users\\ASUS\\Documents\\NetBeansProjects\\TarekJavaCodesServer\\Cloud\\Server\\10mb.zip";
        File file1 = new File(filePath1);
        File file2 = new File(filePath2);
        File file3 = new File(filePath3);
        InputStream in = new FileInputStream(file1);
        byte[] bytes1 = new byte[(int) file1.length()];
        in.read(bytes1);
        in.close();

        in = new FileInputStream(file2);
        byte[] bytes2 = new byte[(int) file2.length()];
        in.read(bytes2);
        in.close();

        in = new FileInputStream(file3);
        byte[] bytes3 = new byte[(int) file3.length()];
        in.read(bytes3);
        in.close();

        if (compareByteArrayes(bytes1, bytes3)) {
            System.out.println("Client1 and Server same file");
        } else {
            System.err.println("Client1 and Server Different file..!!");
        }

        if (compareByteArrayes(bytes1, bytes2)) {
            System.out.println("Client1 and Client2 same file");
        } else {
            System.err.println("Client1 and Client2 Different file..!!");
        }
        createRandomTxtFile(1000000);
    }

    public static boolean compareByteArrayes(byte[] array1, byte[] array2) {
        for (int i = 0; i < array1.length; i++) {
            if (array1[i] != array2[i]) {
                //System.out.println("i = " + i + " : array1[i] = " + array1[i] + " - array2[i] = " + array2[i]);
                return false;
            }
        }
        return true;
    }

    public static void createRandomTxtFile(int size) throws Exception {
        System.out.println("Integer.MAX_VALUE : " + Integer.MAX_VALUE);
        String filePath1 = "Cloud\\client1\\random.txt";
        Random rand = new Random(System.nanoTime());
        byte[] b = new byte[size];
        for (int i = 0; i < b.length; i++) {
            b[i] = (byte) rand.nextInt();
        }
        OutputStream out = new FileOutputStream(filePath1);
        out.write(b);
        out.flush();
        out.close();
    }
}
